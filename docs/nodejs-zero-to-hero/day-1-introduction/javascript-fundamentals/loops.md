---
id: day-1-javascript-loops
title: 'การวนซ้ำ (Loops)'
sidebar_label: Loops
description: ใช้ for และเพื่อน ๆ เพื่อสั่งคอมพิวเตอร์ทำงานซ้ำตามจำนวนรอบหรือเงื่อนไข
---

# การวนซ้ำ (Loops): สั่งให้ทำงานเดิม ๆ ไม่รู้เบื่อ

Loop คือเครื่องมือที่ทรงพลังที่สุดอย่างหนึ่งในการเขียนโปรแกรม มันช่วยให้เราสั่งคอมพิวเตอร์ให้ทำงานบางอย่างซ้ำ ๆ ตามจำนวนรอบหรือเงื่อนไขที่กำหนด โดยไม่ต้องเขียนโค้ดเดิมซ้ำ ๆ เอง ด้านล่างนี้คือ Loop แบบที่ใช้บ่อย พร้อมตัวอย่างและโจทย์ฝึกสำหรับแต่ละแบบ

## `for` Loop: คุมจำนวนรอบได้เป๊ะ

`for` loop คือ Loop แบบคลาสสิกที่ใช้กันอย่างแพร่หลายที่สุด มีโครงสร้างที่ชัดเจน 3 ส่วน: (1) จุดเริ่มต้น (2) เงื่อนไขให้ทำต่อ (3) สิ่งที่ทำเมื่อจบรอบ ทำให้ควบคุมจำนวนรอบได้ตรงตามต้องการ

```javascript
// โครงสร้าง: for ( [จุดเริ่มต้น]; [เงื่อนไขให้ทำต่อ]; [สิ่งที่ทำเมื่อจบรอบ] )

for (let i = 1; i <= 5; i++) {
  console.log("นี่คือรอบที่ " + i);
}
// ผลลัพธ์:
// นี่คือรอบที่ 1
// นี่คือรอบที่ 2
// นี่คือรอบที่ 3
// นี่คือรอบที่ 4
// นี่คือรอบที่ 5
```

Single `for` loop ยังสามารถซ้อนกัน (nested loop) เพื่อสร้าง pattern หรือคำนวณข้อมูลหลายมิติ ตัวอย่างด้านล่างใช้ `for` เพื่อสร้างตารางสูตรคูณ 1 ถึง 3

```javascript
for (let base = 1; base <= 3; base++) {
  let line = "";
  for (let multiplier = 1; multiplier <= 3; multiplier++) {
    line += `${base * multiplier} \t`;
  }
  console.log(line);
}
// ผลลัพธ์
// 1 	2 	3 	
// 2 	4 	6 	
// 3 	6 	9 	
```

เราสามารถใช้ `for` loop เพื่อวนอ่านค่าจาก Array ได้เช่นกัน:

```javascript
const bookCategories = ["Programming", "Science Fiction", "History"];

for (let i = 0; i < bookCategories.length; i++) {
  // i คือ index ที่เริ่มจาก 0
  // bookCategories[i] คือการเข้าถึงข้อมูลใน Array ณ ตำแหน่งนั้น
  console.log("หมวดหมู่: " + bookCategories[i]);
}
// ผลลัพธ์:
// หมวดหมู่: Programming
// หมวดหมู่: Science Fiction
// หมวดหมู่: History
```

**โจทย์ฝึก `for` loop**

1. ให้แสดงเลขคู่ตั้งแต่ 2 ถึง 20 (รวม 20) ลงในคอนโซล
2. รับ Array ของคะแนนสอบ แล้วหาคะแนนสูงสุดด้วยการใช้ `for`
3. (ท้าทาย) พิมพ์ตารางสูตรคูณ 2 ถึง 12 แบบเว้นบรรทัดให้สวยงาม


### `while` Loop: วนซ้ำตราบเท่าที่เงื่อนไขเป็นจริง

`while` loop จะทำงานซ้ำ ๆ ตราบเท่าที่เงื่อนไขที่กำหนดเป็นจริง เหมาะสำหรับสถานการณ์ที่เราไม่รู้จำนวนรอบที่แน่นอนล่วงหน้า

```javascript
// โครงสร้าง: while (เงื่อนไข) { ... }

let count = 0;
while (count < 3) {
  console.log("นับครั้งที่: " + (count + 1));
  count++; // อย่าลืมเพิ่มค่าตัวแปรควบคุม เพื่อไม่ให้เกิด Infinite Loop!
}
// ผลลัพธ์:
// นับครั้งที่: 1
// นับครั้งที่: 2
// นับครั้งที่: 3
```

อีกตัวอย่างหนึ่งคือการลบงานออกจากคิวทีละรายการจนกว่าจะหมดคิว

```javascript
const tasks = ["backup", "resize-image", "send-email"];

while (tasks.length > 0) {
  const currentTask = tasks.shift();
  console.log(`กำลังทำงาน: ${currentTask}`);
}
// ผลลัพธ์:
// กำลังทำงาน: backup
// กำลังทำงาน: resize-image
// กำลังทำงาน: send-email
```

**โจทย์ฝึก `while` loop**

1. ให้สุ่มเลข 1-10 ต่อเนื่องจนกว่าจะเจอเลข 7 แล้วหยุด (บอกจำนวนครั้งที่สุ่ม)
2. รับค่าเงินออมเริ่มต้นและเป้าหมาย แล้วเพิ่มทีละ 100 บาทด้วย `while` จนถึงเป้า พร้อมบอกจำนวนรอบ

### `do...while` Loop: ทำก่อนถาม

`do...while` ทำงานอย่างน้อย 1 รอบเสมอ เพราะจะรันโค้ดใน `do { ... }` ก่อน แล้วค่อยตรวจสอบเงื่อนไขที่ท้ายรอบ เหมาะเมื่อเราต้องการให้โค้ดทำงานขั้นต่ำหนึ่งครั้ง เช่น ขอโค้ดยืนยันจากผู้ใช้

```javascript
let password = "";
const secret = "1234";
let attempts = 0;

do {
  password = getInputFromUser(); // สมมติว่าฟังก์ชันนี้รับข้อความจากผู้ใช้
  attempts++;
  console.log(`ลองครั้งที่ ${attempts}`);
} while (password !== secret && attempts < 3);

if (password === secret) {
  console.log("เปิดประตูสำเร็จ");
} else {
  console.log("ลองเกินกำหนด!");
}
```

**โจทย์ฝึก `do...while` loop**

1. สุ่มตัวเลข 1-6 อย่างน้อย 1 ครั้ง แล้วหมุนต่อไปจนกว่าจะได้เลข 6
2. ใช้ `prompt` (ถ้ารันบนเบราว์เซอร์) เพื่อถามชื่อผู้ใช้เรื่อย ๆ จนกว่าจะใส่ข้อความที่ไม่ว่างเปล่า

### `forEach` Method: สำหรับ Array โดยเฉพาะ

`forEach` เป็น Method ที่มีอยู่ใน Array โดยเฉพาะ ใช้สำหรับวนซ้ำสมาชิกแต่ละตัวใน Array และสามารถเข้าถึงค่า (value), ดัชนี (index) และตัว Array เองได้ เหมาะสำหรับการทำงานกับข้อมูลใน Array โดยตรง

```javascript
const fruits = ["apple", "banana", "cherry"];

fruits.forEach(function (fruit, index) {
  console.log(`ผลไม้ลำดับที่ ${index + 1}: ${fruit}`);
});
// ผลลัพธ์:
// ผลไม้ลำดับที่ 1: apple
// ผลไม้ลำดับที่ 2: banana
// ผลไม้ลำดับที่ 3: cherry
```

นอกจาก `for` แล้ว ยังมี Loop แบบอื่น ๆ เช่น `while` หรือ `forEach` (ที่เราได้เห็นในตัวอย่าง Lab) ซึ่งแต่ละแบบก็มีสไตล์การใช้งานที่เหมาะกับสถานการณ์ต่างกันไปครับ

เมธอด `forEach` ยังใช้ร่วมกับ Arrow Function และเงื่อนไขภายในได้ เช่นการรวมยอดที่มากกว่า 100

```javascript
const invoices = [120, 80, 450];
let total = 0;

invoices.forEach((amount) => {
  if (amount >= 100) {
    total += amount;
  }
});

console.log(`ยอดรวมที่ผ่านเกณฑ์: ${total}`);
```

**โจทย์ฝึก `forEach`**

1. รับ Array ของชื่อนักเรียนแล้วพิมพ์เป็นประโยค เช่น `Student: Benz`
2. รับ Array ของเงินเดือนแล้วหาค่าเฉลี่ยด้วย `forEach`
