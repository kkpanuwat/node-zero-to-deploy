---
id: day-2-debugging-checklist
title: 'Day 2: Debugging First-Aid Kit'
sidebar_label: 'Debugging Checklist'
description: คู่มือแก้ปัญหาและดีบักเบื้องต้นสำหรับ Node.js server ตั้งแต่วิธีอ่าน error, การเช็ก port, ไปจนถึงการแก้ปัญหายอดฮิต
---

# Part 3 — Your Debugging First-Aid Kit

เจอ Error? ไม่ต้องตกใจ! Error เป็นส่วนหนึ่งของการเขียนโค้ดและเป็นโอกาสให้เราได้เรียนรู้ มาสวมบทเป็นนักสืบและแก้ปัญหานี้ไปด้วยกัน

---

### Step 1: ตรวจสอบสัญญาณชีพของเซิร์ฟเวอร์

ก่อนจะลงลึกในโค้ด, ถามคำถามพื้นฐานเหล่านี้ก่อน:
1.  **"โปรแกรมของเรายังรันอยู่หรือไม่?"**
    - ดูที่ Terminal, โปรแกรม Crash ไปหรือยัง? หรือยังรันอยู่ปกติ?
2.  **"เซิร์ฟเวอร์เปิดอยู่ที่พอร์ตไหน?"**
    - มองหา Log ตอนเริ่มต้นที่บอกว่า `Server running at http://localhost:....`
3.  **"เราเรียก URL ถูกต้องหรือไม่?"**
    - ตรวจสอบ Method (`GET`/`POST`), Path (`/books`), และ Port ให้แน่ใจว่าตรงกับที่เราตั้งใจไว้

---

### Step 2: อ่าน Error Message อย่างเข้าใจ

Stack trace อาจจะดูน่ากลัว, แต่จริงๆ แล้วมันคือ "ข้อความจากโปรแกรม" ที่พยายามบอกใบ้เราอยู่ มองหา 3 สิ่งนี้เสมอ:
1.  **ข้อความ Error หลัก:** ส่วนที่สำคัญที่สุด เช่น `EADDRINUSE`, `Cannot find module`, หรือ `Unexpected token`.
2.  **ต้นตอของปัญหา:** มองหา **ชื่อไฟล์และเลขบรรทัดแรกที่เป็นโค้ดของเรา** นี่คือจุดเริ่มต้นของการสืบสวน!
3.  **บริบท:** เรากำลังทำอะไรตอนที่ Error เกิด? (เช่น เรียก Endpoint ไหน, ส่งข้อมูลอะไรไป)

---

### Step 3: ตรวจสอบผู้ต้องสงสัยที่พบบ่อย (Common Issues)

#### **อาการ:** `EADDRINUSE: address already in use`
- **ความหมายแบบบ้านๆ:** "Port นี้มีคนใช้อยู่แล้ว!"
- **วิธีแก้:**
  1.  ตรวจสอบว่าคุณมี Terminal อื่นที่รัน `npm run dev` ค้างไว้อยู่หรือไม่? ถ้ามี ให้ปิดอันเก่าก่อน
  2.  ถ้าหาไม่เจอจริงๆ, ลองเปลี่ยน `PORT` ในไฟล์ `.env` เป็นเลขอื่น (เช่น `3001`)

#### **อาการ:** `Cannot find module '...'`
- **ความหมายแบบบ้านๆ:** "หาไฟล์/ไลบรารีที่เรียกใช้ไม่เจอ"
- **วิธีแก้:**
  1.  **สำหรับไฟล์ของเราเอง (`require('./...')`):** ตรวจสอบ Path ว่าถูกต้องหรือไม่? จุด (`.`) และ (`..`) สำคัญมาก!
  2.  **สำหรับไลบรารี (`require('nodemon')`):** ตรวจสอบ `package.json` ว่ามีชื่อไลบรารีนั้นอยู่หรือไม่? แล้วคุณรัน `npm install` แล้วหรือยัง?

#### **อาการ:** เปิดหน้าเว็บแล้วขึ้น `404 Not Found`
- **ความหมายแบบบ้านๆ:** "เซิร์ฟเวอร์ทำงานอยู่ แต่ไม่รู้จัก URL ที่คุณขอ"
- **วิธีแก้:**
  1.  **เช็ก Routing Logic:** โค้ดที่จัดการ `pathname` ของคุณทำงานถูกต้องหรือไม่? ลอง `console.log(pathname)` เพื่อดูว่าค่าที่ได้ตรงกับที่คาดหวังหรือไม่
  2.  **เช็ก Method:** คุณกำลังเรียกด้วย `GET` แต่ Endpoint นั้นรับเฉพาะ `POST` หรือเปล่า?

#### **อาการ:** ส่ง `POST` Request แล้วเซิร์ฟเวอร์ไม่เข้าใจ (Parse Error)
- **ความหมายแบบบ้านๆ:** "ข้อมูลที่ส่งมาไม่ใช่ JSON ที่ถูกต้อง"
- **วิธีแก้:**
  1.  **เช็ก Header:** ตรวจสอบให้แน่ใจว่า Request ของคุณมี Header `Content-Type: application/json`
  2.  **เช็ก Body:** ข้อมูล JSON ที่คุณส่งมาถูกต้องตามไวยากรณ์หรือไม่? (เช่น ไม่มีลูกน้ำตัวสุดท้าย `trailing comma`, เครื่องหมายคำพูดครบถ้วน)
  - **ใช้ `curl` เพื่อความมั่นใจ:**
    ```bash
    curl -X POST http://localhost:3000/books \
      -H "Content-Type: application/json" \
      -d '{"title": "Clean Code", "author": "Robert C. Martin"}'
    ```

---

### Pro-Tip: วิธีขอความช่วยเหลืออย่างมืออาชีพ

เมื่อลองทุกอย่างแล้วยังแก้ไม่ได้, การขอความช่วยเหลือเป็นสิ่งที่ควรทำ นี่คือวิธีที่จะทำให้คนอื่นช่วยคุณได้เร็วขึ้น:
1.  **บอกสิ่งที่คุณทำ:** "ผมลอง `POST` ไปที่ `/books` ด้วยข้อมูล..."
2.  **บอกสิ่งที่คาดหวัง:** "...ผมคาดว่ามันจะตอบกลับ Status 201 และข้อมูลหนังสือที่สร้างใหม่"
3.  **บอกสิ่งที่เกิดขึ้นจริง:** "...แต่ผมกลับได้ Status 500 และเจอ Error แบบนี้ครับ"
4.  **แนบหลักฐาน:** แคปภาพหน้าจอของ **Error Message ทั้งหมด** และ **โค้ดส่วนที่เกี่ยวข้อง**

> **ทักษะนักสืบ:** ก่อนที่จะไล่แก้โค้ดไปเรื่อยๆ, ลอง "ตั้งสมมติฐาน" ขึ้นมาหนึ่งข้อ (เช่น "ฉันคิดว่า `body` ที่อ่านได้เป็น `null`") แล้วใช้ `console.log()` เพื่อพิสูจน์สมมติฐานนั้น การทำแบบนี้จะช่วยให้คุณแก้ปัญหาได้ตรงจุดและรวดเร็วขึ้นมาก

